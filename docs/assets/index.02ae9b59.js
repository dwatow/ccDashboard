var N=Object.defineProperty,B=Object.defineProperties;var C=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var j=(n,t,c)=>t in n?N(n,t,{enumerable:!0,configurable:!0,writable:!0,value:c}):n[t]=c,e=(n,t)=>{for(var c in t||(t={}))E.call(t,c)&&j(n,c,t[c]);if(v)for(var c of v(t))L.call(t,c)&&j(n,c,t[c]);return n},i=(n,t)=>B(n,C(t));import{a as U,r as P,o as p,c as _,t as y,b as m,d as r,e as k,F as T,f as x,g as b,p as R,h as w,w as A,i as I,l as V,j as H,k as M,m as q}from"./vendor.27ebe9a1.js";const O=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))u(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&u(d)}).observe(document,{childList:!0,subtree:!0});function c(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function u(s){if(s.ep)return;s.ep=!0;const a=c(s);fetch(s.href,a)}};O();const D=U.create({baseURL:"https://my-god.cyclic.app"});async function G(n){try{return(await D.get("/cc-update-staus",{params:n})).data}catch{return{isSync:1}}}var l={fetchUpdateStatus:G};const o={error:-1,init:null,syncable:0,success:1,connecting:2};var J=(n,t)=>{const c=n.__vccOpts||n;for(const[u,s]of t)c[u]=s;return c};const K={name:"CCDashboard",created(){},data(){return{all_erp_status:{ccerpF:{isSync:o.init,job:"ccerp",repo:"ccerp-frontend",name:"\u5168\u5F37 ERP \u524D\u7AEF (AngularJS)"},ccerpFV:{isSync:o.init,job:"ccerp",repo:"ccerp-frontend-vue",name:"\u5168\u5F37 ERP \u524D\u7AEF (Vue)"},ccerpB:{isSync:o.init,job:"ccerp",repo:"ccerp-backend",name:"\u5168\u5F37 ERP \u5F8C\u7AEF"},ccgeoF:{isSync:o.init,job:"ccgeo",repo:"ccgeo-frontend",name:"\u5927\u5730\u76E3\u63A7 \u524D\u7AEF"},ccgeoB:{isSync:o.init,job:"ccgeo",repo:"ccgeo-backend",name:"\u5927\u5730\u76E3\u63A7 \u5F8C\u7AEF"},jserpF:{isSync:o.init,job:"jserp",repo:"frontend",name:"\u90E1\u4FE1 ERP \u524D\u7AEF"},jserpB:{isSync:o.init,job:"jserp",repo:"backend",name:"\u90E1\u4FE1 ERP \u5F8C\u7AEF"},patronF:{isSync:o.init,job:"patron",repo:"frontend",name:"\u53F0\u7063\u5B88\u8B77 ERP \u524D\u7AEF"},patronB:{isSync:o.init,job:"patron",repo:"backend",name:"\u53F0\u7063\u5B88\u8B77 ERP \u5F8C\u7AEF"},prettyF:{isSync:o.init,job:"pretty",repo:"frontend",name:"\u53F0\u7063\u771F\u7F8E ERP \u524D\u7AEF"},prettyB:{isSync:o.init,job:"pretty",repo:"backend",name:"\u53F0\u7063\u771F\u7F8E ERP \u5F8C\u7AEF"},campF:{isSync:o.init,job:"easy-camp",repo:"frontend",name:"\u9732\u71DF\u6A02 ERP \u524D\u7AEF"},campB:{isSync:o.init,job:"easy-camp",repo:"backend",name:"\u9732\u71DF\u6A02 ERP \u5F8C\u7AEF"}},current_erp:{isSync:o.init},error:null}},updated(){this.$nextTick(()=>{this.removeH2Link(),this.removeNameLink()})},computed:{syncType:()=>o},methods:{setSyncType(n){Object.values(this.all_erp_status).forEach(t=>{t.isSync=o[n]})},fetchStatus(n){try{if(this.error="\u9023\u7DDA\u4E2D...",n==null)this.setSyncType("connecting"),l.fetchUpdateStatus({job:"ccerp",repo:"ccerp-frontend"}).then(t=>{t.isSync=Number(t.isSync),this.all_erp_status=i(e({},this.all_erp_status),{ccerpF:e(e({},this.all_erp_status.ccerpF),t)})}),l.fetchUpdateStatus({job:"ccerp",repo:"ccerp-frontend-vue"}).then(t=>{t.isSync=Number(t.isSync),this.all_erp_status=i(e({},this.all_erp_status),{ccerpFV:e(e({},this.all_erp_status.ccerpFV),t)})}),l.fetchUpdateStatus({job:"ccerp",repo:"ccerp-backend"}).then(t=>{t.isSync=Number(t.isSync),this.all_erp_status=i(e({},this.all_erp_status),{ccerpB:e(e({},this.all_erp_status.ccerpB),t)})}),l.fetchUpdateStatus({job:"ccgeo",repo:"ccgeo-frontend"}).then(t=>{t.isSync=Number(t.isSync),this.all_erp_status=i(e({},this.all_erp_status),{ccgeoF:e(e({},this.all_erp_status.ccgeoF),t)})}),l.fetchUpdateStatus({job:"ccgeo",repo:"ccgeo-backend"}).then(t=>{t.isSync=Number(t.isSync),this.all_erp_status=i(e({},this.all_erp_status),{ccgeoB:e(e({},this.all_erp_status.ccgeoB),t)})}),l.fetchUpdateStatus({job:"jserp",repo:"frontend"}).then(t=>{t.isSync=Number(t.isSync),this.all_erp_status=i(e({},this.all_erp_status),{jserpF:e(e({},this.all_erp_status.jserpF),t)})}),l.fetchUpdateStatus({job:"jserp",repo:"backend"}).then(t=>{t.isSync=Number(t.isSync),this.all_erp_status=i(e({},this.all_erp_status),{jserpB:e(e({},this.all_erp_status.jserpB),t)})}),l.fetchUpdateStatus({job:"patron",repo:"frontend"}).then(t=>{t.isSync=Number(t.isSync),this.all_erp_status=i(e({},this.all_erp_status),{patronF:e(e({},this.all_erp_status.patronF),t)})}),l.fetchUpdateStatus({job:"patron",repo:"backend"}).then(t=>{t.isSync=Number(t.isSync),this.all_erp_status=i(e({},this.all_erp_status),{patronB:e(e({},this.all_erp_status.patronB),t)})}),l.fetchUpdateStatus({job:"pretty",repo:"frontend"}).then(t=>{t.isSync=Number(t.isSync),this.all_erp_status=i(e({},this.all_erp_status),{prettyF:e(e({},this.all_erp_status.prettyF),t)})}),l.fetchUpdateStatus({job:"pretty",repo:"backend"}).then(t=>{t.isSync=Number(t.isSync),this.all_erp_status=i(e({},this.all_erp_status),{prettyB:e(e({},this.all_erp_status.prettyB),t)})}),l.fetchUpdateStatus({job:"easy-camp",repo:"frontend"}).then(t=>{t.isSync=Number(t.isSync),this.all_erp_status=i(e({},this.all_erp_status),{campF:e(e({},this.all_erp_status.campF),t)})}),l.fetchUpdateStatus({job:"easy-camp",repo:"backend"}).then(t=>{t.isSync=Number(t.isSync),this.all_erp_status=i(e({},this.all_erp_status),{campB:e(e({},this.all_erp_status.campB),t)})});else{const t=this.all_erp_status[n],{job:c,repo:u}=t;t.isSync=o.connecting,console.log(t,n),l.fetchUpdateStatus({job:c,repo:u}).then(s=>{s.isSync=Number(s.isSync),this.all_erp_status=i(e({},this.all_erp_status),{[n]:e(e({},this.all_erp_status[n]),s)})})}this.error=null}catch(t){this.error=t}},update(n,t){this.current_erp=e({key:t},n)},removeH2Link(){document.querySelectorAll(".content h2").forEach(n=>{const t=n.querySelector("a");if(t!=null){const c=t.textContent;n.textContent=c}})},removeNameLink(){document.querySelectorAll(".content ol").forEach(n=>{const t=n.querySelector("a");if(t!=null){const c=t.textContent;[...n.querySelectorAll("a")].filter(s=>s.textContent===c).forEach(s=>s.outerHTML=s.textContent)}})}}},F=n=>(R("data-v-1066e6c4"),n=n(),w(),n),z={class:"container"},Q={key:0},W=b(" \u91CD\u65B0\u6574\u7406 "),X={class:"nav nav-tabs erp_status"},Y=["onClick"],Z={key:0,class:"badge rounded-pill bg-danger"},$=["onClick"],tt={key:2,class:"badge rounded-pill bg-success"},et={key:1,class:"content"},st=["href"],nt={class:"row"},ct={class:"col"},rt=F(()=>r("h1",null,[r("span",{class:"col-6"},"\u6E2C\u8A66\u6A5F")],-1)),at={class:"col-7"},ot=b(" \u6700\u5F8C\u66F4\u65B0: "),it=["href"],lt=["innerHTML"],pt={class:"col"},_t=F(()=>r("h1",null,[r("span",{class:"col-6"},"\u6B63\u5F0F\u6A5F")],-1)),ut={class:"col-7"},ht=b(" \u6700\u5F8C\u66F4\u65B0: "),dt=["href"],yt=["innerHTML"],mt={key:2};function bt(n,t,c,u,s,a){var g;const d=P("FontAwesomeIcon");return p(),_("div",z,[s.error?(p(),_("span",Q,y(s.error),1)):m("",!0),r("button",{type:"button",class:"btn btn-primary my-2 me-2",onClick:t[0]||(t[0]=h=>a.fetchStatus(null))},[W,k(d,{icon:"fa-solid fa-rotate-right"})]),r("nav",null,[r("ul",X,[(p(!0),_(T,null,x(s.all_erp_status,(h,f)=>(p(),_("li",{class:"nav-item",key:f},[r("a",{class:"nav-link active erp-name","aria-current":"page",onClick:S=>a.update(h,f)},[b(y(h.name)+" ",1),h.isSync===a.syncType.syncable?(p(),_("small",Z," \u5F85\u66F4\u65B0 ")):m("",!0),["init","error","syncable","success"].some(S=>a.syncType[S]===h.isSync)?(p(),_("button",{key:1,type:"button",class:"btn btn-outline-secondary my-2 mx-1 btn-sm",onClick:A(S=>a.fetchStatus(f),["prevent"])},[k(d,{icon:"fa-solid fa-rotate-right"})],8,$)):m("",!0),h.isSync===a.syncType.connecting?(p(),_("small",tt," \u9023\u7DDA\u4E2D ")):m("",!0)],8,Y)]))),128))])]),["syncable","success","error"].some(h=>a.syncType[h]===s.current_erp.isSync)?(p(),_("div",et,[r("a",{class:"btn btn-outline-success my-3",target:"_blank",href:s.current_erp.network},"Github Network",8,st),r("div",nt,[r("div",ct,[r("div",null,[rt,r("p",null,[r("span",at,[ot,r("a",{href:s.current_erp.lastest_stage.link},y(s.current_erp.lastest_stage.log),9,it)])]),r("div",{innerHTML:s.current_erp.lastest_stage.html},null,8,lt)])]),r("div",pt,[r("div",null,[_t,r("p",null,[r("span",ut,[ht,r("a",{href:s.current_erp.lastest_prod.link},y(s.current_erp.lastest_prod.log),9,dt)])]),r("div",{innerHTML:s.current_erp.lastest_prod.html},null,8,yt)])])])])):(p(),_("div",mt,"("+y((g=s.current_erp)==null?void 0:g.name)+" \u8CC7\u6599\u8F09\u5165\u4E2D...)",1))])}var ft=J(K,[["render",bt],["__scopeId","data-v-1066e6c4"]]);const St={setup(n){return(t,c)=>(p(),I(ft))}};V.add(H);M(St).component("FontAwesomeIcon",q).mount("#app");
